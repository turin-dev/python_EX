# 26. 정규 표현식

파이썬의 `re` 모듈은 **Perl과 유사한 정규 표현식** 기능을 제공하여 문자열에서 패턴을 검색·추출·치환할 수 있다. 공식 문서는 `re`가 텍스트와 바이트 문자열 모두를 처리하지만 두 타입을 혼합할 수 없으며, 패턴과 문자열 모두 같은 타입이어야 한다고 강조한다【828181792838354†L72-L98】. 또한 특수 문자(역슬래시 등)를 그대로 사용하기 위해 문자열 리터럴 앞에 `r`을 붙여 **원시 문자열**을 사용하는 것이 권장된다【828181792838354†L72-L98】.

## 기본 함수

- `re.search(pattern, string)` – 문자열 전체에서 패턴을 찾아 첫 번째 매치를 반환한다.
- `re.match(pattern, string)` – 문자열의 **시작**에서만 매치 여부를 확인한다.
- `re.findall(pattern, string)` – 매치되는 모든 부분 문자열을 리스트로 반환한다.
- `re.sub(pattern, repl, string)` – 매치되는 부분을 다른 문자열로 대체한다.
- `re.compile(pattern, flags=0)` – 패턴을 미리 컴파일하여 여러 번 사용할 때 효율적이다.

## 패턴 예시와 메타 문자

- `.` : 임의의 한 문자
- `\d` : 숫자, `\w` : 알파벳 또는 숫자, `\s` : 공백 문자
- `*` : 0회 이상 반복, `+` : 1회 이상 반복, `?` : 0회 혹은 1회
- `[]` : 문자 집합, `[^]` : 집합의 보수
- `()` : 그룹 지정, `|` : OR

예를 들어, 전화번호를 추출하는 다음의 패턴을 보자.

```python
import re
text = "문의는 010-1234-5678로 주세요. 다른 번호 011-987-6543도 있습니다."
pattern = r"\b\d{2,3}-\d{3,4}-\d{4}\b"
numbers = re.findall(pattern, text)
print(numbers)  # ['010-1234-5678', '011-987-6543']
```

## 플래그

정규 표현식은 플래그를 이용해 동작을 변경할 수 있다. 예를 들면:

- `re.IGNORECASE` (`re.I`) : 대소문자 구분 없이 검색
- `re.MULTILINE` (`re.M`) : `^`와 `$`가 각 줄의 시작과 끝에 매치
- `re.DOTALL` (`re.S`) : `.`이 줄바꿈 문자까지 포함하도록 매치

```python
pattern = re.compile(r"^test", re.MULTILINE)
result = pattern.findall("test\nTest\ntesting")
print(result)  # ['test', 'Test']
```

## 주의 사항

- **혼합 타입 금지**: 바이트 패턴과 문자열은 함께 사용할 수 없다【828181792838354†L72-L98】.
- **이스케이프 처리**: 역슬래시를 포함한 패턴은 원시 문자열(`r"..."`)을 사용해 두 번 이스케이프하는 번거로움을 피한다.
- **복잡한 패턴 유지관리**: 가독성이 떨어질 경우 문자열 보간을 사용하거나 여러 패턴을 분해하여 컴파일한 뒤 조합하는 것이 좋다.

정규 표현식은 강력한 도구지만, 과도하게 사용하면 코드가 복잡해질 수 있으므로 적절한 범위에서 활용해야 한다.